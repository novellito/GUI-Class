<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Hello World!</title>
  <link rel="stylesheet" href="./photon/css/photon.css">
  <link href="./photon/fonts/photon-entypo.ttf">
</head>

<body>

  <div class="window">
    <div class="window-content">
      <div class="pane-group">
        <div class="pane-sm sidebar">
          <nav class="nav-group">
            <h5 class="nav-group-title">Favorites</h5>
            <a class="nav-group-item active">
              <span class="icon icon-home"></span>
              connors
            </a>
            <span class="nav-group-item">
              <span class="icon icon-download"></span>
              Downloads
            </span>
            <span class="nav-group-item">
              <span class="icon icon-folder"></span>
              Documents
            </span>
            <span class="nav-group-item">
              <span class="icon icon-signal"></span>
              AirPlay
            </span>
            <span class="nav-group-item">
              <span class="icon icon-print"></span>
              Applications
            </span>
            <span class="nav-group-item">
              <span class="icon icon-cloud"></span>
              Desktop
            </span>
          </nav>
        </div>
        <div class="pane">
          <div id="userDetails">
            <h2>User Details</h2>
          </div>
          <br>
          <div id="friends">
            <h2>Friends</h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /***** Basic front-end to display user info. *****/
    
    /***** Database Connection *****/
    var userDetails = document.getElementById('userDetails');
    var mysql = require('mysql');
    var friends = document.getElementById('friends');

    var connection = mysql.createConnection({
        host     : 'localhost',
        user     : 'root',
        password : '',
        database : 'fblite'
    });
        
    connection.connect();
    
    let userID = '123456'
    let userQuery = `SELECT * FROM users WHERE id=${userID}`;
    let friendQuery = `SELECT * FROM users INNER JOIN user_friends ON users.id = user_friends.friend_id WHERE user_friends.user_id=${userID}`;

    connection.query(userQuery, function (error, results, fields) {
      if (error) throw error;
      console.log(results);
      for(let i = 0; i<results.length; i++) {
          userDetails.innerHTML += `<p><strong>First Name:</strong> ${results[i].fname}, <strong>Age:</strong> ${results[i].age}</p>`;
      }
    });

    connection.query(friendQuery, function(error, results, fields) {
      console.log(results);
      for(let i = 0; i<results.length; i++) {
        friends.innerHTML += `<p><strong>Name: </strong> ${results[i].fname} ${results[i].lname}, <strong>Age: </strong> ${results[i].age}`;
      }
    });

        
    connection.end();
    
  </script>
  <script>
    // You can also require other files to run in this process
    require('./renderer.js')
  </script>
</body>

</html>